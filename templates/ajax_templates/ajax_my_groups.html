<div id="primary_data">

    <div id="ajax_error_message">
        {% if error is defined %}
        {{ error }}
        {% endif %}
    </div>

    <form id="create_group">
        
            
                
                    <p>Create New Group</p>
                
            
            
                <input type="text" placeholder="New Group" autocomplete="off" name="new_group_name" id="new_group_name">
                
                    <input type="submit" value="Add">
                
            
        
    </form>

    <br>




    <!-- MAY NEED TO REVAMP HOW FORM SUBMITION WORKS FOR A BETTER USER EXPERIENCE
         CONSIDER USING BOOTSTRAP MODAL -->
    <!-- {% for row in groups %}
    
        
    
    <button class="btn" type="button" data-bs-toggle="collapse" data-bs-target="#{{ row['groups_id'] }}" aria-expanded="false" aria-controls="collapseExample">
        {{ row['groups_name'] }}
    </button>
    <br>
    <div class="collapse" id="{{ row['groups_id'] }}">
        <div class="card card-body">
            {% for group in group_items %}
            {% if group['groups_id'] == row['groups_id'] %}
        <div>

            <ul>
                <li>
                    <div>
                        <h4>
                            {{ group['item_name']}}
                        </h4>
                        <p>
                        <div id="quantity">
                            Quantity:
                            <input type="number" onchange="update_quantity(this.id);"
                                onkeyup="update_quantity(this.id);" onclick="this.select();"
                                id="{{ group['groups_items_id'] }}" name="new_quantity"
                                value="{{ group['quantity'] }}" style="width: 40px;">
                        </div>
                        </p>
                    </div>
                </li>
            </ul>

            <br>
        </div>

        {% endif %}
        {% endfor %}
        </div>
    </div>



    {% endfor %} -->




    <div class="container">
 
        {% for row in groups %}

        
            
                <br>
                
                    <div class="fs-5 fw-bold">{{ row['groups_name'] }}</div>

                    <form id="add_item_to_group">


                        <input type="hidden" name="groups" id="groups" value="{{ row['groups_id'] }}">
        
        
                        <label for="item_to_add">Add to {{ row['groups_name'] }} recipe:</label>
                        <br>
                        <input list="items" name="item_to_add" id="item_to_add" autocomplete="off">
        
                            <datalist id="items" name="items">
                                {% for item in users_items %}
                                <option value="{{ item['item_name'] }}"></option>
                                {% endfor %}
                            </datalist>
        
        
        
        
                        <label for="quantity">Quantity:</label>
                        <input name="quantity" id="quantity" type="number" value="1" style="max-width: 50px;">
                        <input type="submit" value="Add">
        
                    </form>

                    <br>
                    Ingredients:

                    {% for group in group_items %}
                    {% if group['groups_id'] == row['groups_id'] %}
                

                    <ul>
                        <li>
                            <div class="container">
                                <div class="row">

                                    <div id="quantity" class="col">
                                        <input type="number" onchange="update_quantity(this.id);"
                                            onkeyup="update_quantity(this.id);" onclick="this.select();"
                                            id="{{ group['groups_items_id'] }}" name="new_quantity"
                                            value="{{ group['quantity'] }}" style="width: 40px;">
                                            
                                                {{ group['item_name']}}
                                            
                                    </div>

                                    <form class="col" id="change_quantity_in_group" method="post">
                                        <input type="hidden" name="id" value="{{ group['groups_items_id'] }}">
                                        <input type="hidden" name="value" value="0">
                                        <button class="btn btn-danger" type="submit">X</button>
                                    </form>

                            </div>

                            
                                
                            </div>
                        </li>
                    </ul>

                

                {% endif %}
                {% endfor %}
                
            



            
                <form id="add_from_group_verification">
                    <input type="hidden" name="group_id" id="group_id" value="{{ row['groups_id'] }}">
                    <input type="submit" value="Add to Grocery List">
                </form>
            

            
                <form id="delete_group">
                    <input type="hidden" name="group_to_delete" id="group_to_delete" value="{{ row['groups_id'] }}">
                    <input type="submit" value="Delete group">
                </form>
            







        




        {% endfor %}
    </div>
</div>